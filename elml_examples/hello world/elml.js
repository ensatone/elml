var elml={};null!=process.argv[2]&&"--help"!=process.argv[2]||(console.log("help"),console.log("=> node elml.js [filename]"),process.exit()),elml.fs=require("fs"),elml.layers=[],elml.layer=0,elml._mode=!1,elml.__attr="",elml.___attr="",elml._prev_node=void 0,elml._generated="",elml.__output_filename=process.argv[2].split("."),elml.__output_filename.pop(),elml.__output_filename.push("html"),elml.__output_filename=elml.__output_filename.join("."),elml.elem=function(l){this.attr=l,this._parentNode=void 0,this._childNodes=[],this._innerHTML=""},elml.parse=function(){try{elml.text=elml.fs.readFileSync(process.argv[2],"utf-8")}catch{console.log("error... no input file found..."),process.exit()}elml.text=elml.text.split("\n");for(var l=0;l<elml.text.length;l++)if(elml.layer=0,"@"==elml.text[l].charAt(0)){for(var e=1;e<elml.text[l].length;e++){if("-"!=elml.text[l].charAt(e)){if(">"==elml.text[l].charAt(e)){elml.__attr="";for(var t=e+1;t<elml.text[l].length;t++)elml.__attr+=elml.text[l].charAt(t);elml.___attr=elml.__attr;for(t=0;t<elml.__attr.length&&" "==elml.__attr.charAt(t);t++)elml.___attr=elml.__attr.slice(t+1,elml.__attr.length);elml.__attr=elml.___attr;for(t=elml.__attr.length-1;t>=0&&" "==elml.__attr.charAt(t);t--)elml.___attr=elml.__attr.slice(0,elml.__attr.length-1);elml.__attr=elml.___attr}break}elml.layer++}0==elml.layer?"s"==elml.text[l].charAt(1)?elml._mode=!0:"e"==elml.text[l].charAt(1)&&(elml._mode=!1):elml._mode&&"-"==elml.text[l].charAt(1)&&(elml.layers[elml.layer]=new elml.elem(elml.__attr),elml._prev_node=elml.layers[elml.layer],elml.layer>1&&(elml.layers[elml.layer-1]||(console.log("error... no parent nodes found..."),process.exit()),elml.layers[elml.layer-1]._childNodes.push(elml.layers[elml.layer]),elml.layers[elml.layer]._parentNode=elml.layers[elml.layer-1]))}else elml._mode&&("\\"==elml.text[l].charAt(0)&&"@"==elml.text[l].charAt(1)?elml._prev_node._innerHTML+=elml.text[l].slice(1,elml.text[l].length)+"\n":elml._prev_node._innerHTML+=elml.text[l]+"\n")},elml.parse(),elml.compile=function(l){"innerHTML"!=l.attr&&(elml._generated+="<"+l.attr+">"),""!=l._innerHTML&&(elml._generated+=l._innerHTML);for(var e=0;e<l._childNodes.length;e++)elml.compile(l._childNodes[e]);"innerHTML"!=l.attr&&(elml._generated+="</"+l.attr.split(" ")[0]+">")},elml.compile(elml.layers[1]),elml.fs.writeFileSync(elml.__output_filename,elml._generated);
